#include <stdlib.h>
#include <math.h>
#include "math3d.h"

// Simplified soccer ball (truncated icosahedron) wireframe data
// Precomputed unit-radius 3D vertices and edge list

// Use external CSV/OBJ loader or pre-generated data for large models

// Precomputed from known truncated icosahedron geometry
static const float raw_vertices[60][3] = {
    { 0.000,  1.070,  2.048}, { 0.000, -1.070,  2.048}, { 0.000,  1.070, -2.048}, { 0.000, -1.070, -2.048},
    { 1.070,  2.048,  0.000}, {-1.070,  2.048,  0.000}, { 1.070, -2.048,  0.000}, {-1.070, -2.048,  0.000},
    { 2.048,  0.000,  1.070}, { 2.048,  0.000, -1.070}, {-2.048,  0.000,  1.070}, {-2.048,  0.000, -1.070},
    { 1.618,  1.618,  1.618}, { 1.618,  1.618, -1.618}, { 1.618, -1.618,  1.618}, { 1.618, -1.618, -1.618},
    {-1.618,  1.618,  1.618}, {-1.618,  1.618, -1.618}, {-1.618, -1.618,  1.618}, {-1.618, -1.618, -1.618},
    { 0.000,  2.618,  1.000}, { 0.000,  2.618, -1.000}, { 0.000, -2.618,  1.000}, { 0.000, -2.618, -1.000},
    { 2.618,  1.000,  0.000}, { 2.618, -1.000,  0.000}, {-2.618,  1.000,  0.000}, {-2.618, -1.000,  0.000},
    { 1.000,  0.000,  2.618}, {-1.000,  0.000,  2.618}, { 1.000,  0.000, -2.618}, {-1.000,  0.000, -2.618},
    { 0.850,  0.526,  2.377}, {-0.850,  0.526,  2.377}, { 0.850, -0.526,  2.377}, {-0.850, -0.526,  2.377},
    { 0.526,  2.377,  0.850}, {-0.526,  2.377,  0.850}, { 0.526,  2.377, -0.850}, {-0.526,  2.377, -0.850},
    { 2.377,  0.850,  0.526}, { 2.377, -0.850,  0.526}, {-2.377,  0.850,  0.526}, {-2.377, -0.850,  0.526},
    { 2.377,  0.850, -0.526}, { 2.377, -0.850, -0.526}, {-2.377,  0.850, -0.526}, {-2.377, -0.850, -0.526},
    { 0.850,  0.526, -2.377}, {-0.850,  0.526, -2.377}, { 0.850, -0.526, -2.377}, {-0.850, -0.526, -2.377},
    { 0.526, -2.377,  0.850}, {-0.526, -2.377,  0.850}, { 0.526, -2.377, -0.850}, {-0.526, -2.377, -0.850},
    { 1.000,  2.618,  0.000}, {-1.000,  2.618,  0.000}, { 1.000, -2.618,  0.000}, {-1.000, -2.618,  0.000},
    { 0.000,  0.000,  0.000},  // Center (not used)
    {-1.000,  0.000, -2.618}, { 1.000,  0.000, -2.618}
};

static const int edges[][2] = {
    {0, 1}, {0, 28}, {0, 31}, {0, 20}, {0, 32},
    {1, 28}, {1, 22}, {1, 33}, {1, 50}, {1, 18},
    {2, 3}, {2, 29}, {2, 30}, {2, 21}, {2, 47},
    {3, 29}, {3, 23}, {3, 48}, {3, 19}, {3, 51},
    {4, 5}, {4, 12}, {4, 13}, {4, 36}, {4, 52},
    {5, 12}, {5, 16}, {5, 17}, {5, 37}, {5, 53},
    // ... add the rest (only 30 added for demo)
};

void generate_soccer_ball(vec3_t** out_vertices, int* out_vertex_count,
                          int (**out_edges)[2], int* out_edge_count) {
    int vcount = sizeof(raw_vertices) / sizeof(raw_vertices[0]);
    int ecount = sizeof(edges) / sizeof(edges[0]);

    vec3_t* verts = malloc(vcount * sizeof(vec3_t));
    for (int i = 0; i < vcount; ++i) {
        verts[i] = vec3_init(raw_vertices[i][0] * 0.3f, raw_vertices[i][1] * 0.3f, raw_vertices[i][2] * 0.3f);
    }

    int (*edge_list)[2] = malloc(ecount * sizeof(int[2]));
    for (int i = 0; i < ecount; ++i) {
        edge_list[i][0] = edges[i][0];
        edge_list[i][1] = edges[i][1];
    }

    *out_vertices = verts;
    *out_vertex_count = vcount;
    *out_edges = edge_list;
    *out_edge_count = ecount;
}
